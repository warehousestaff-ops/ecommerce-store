<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart &mdash; Store.</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .cart-page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 3rem 2.5rem 6rem;
      display: grid;
      grid-template-columns: 1fr 340px;
      gap: 3rem;
      align-items: start;
    }

    /* Items */
    .cart-items { }

    .cart-item {
      display: grid;
      grid-template-columns: 88px 1fr auto;
      gap: 1.25rem;
      align-items: center;
      padding: 1.25rem 0;
      border-bottom: 1px solid var(--border);
    }

    .cart-item:first-child { border-top: 1px solid var(--border); }

    .cart-item-img {
      width: 88px;
      height: 88px;
      border-radius: 3px;
      overflow: hidden;
      background: var(--gray-100);
      flex-shrink: 0;
    }

    .cart-item-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .cart-item-info { min-width: 0; }

    .cart-item-cat {
      font-size: 0.68rem;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--gray-400);
      margin-bottom: 0.2rem;
    }

    .cart-item-name {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 0.4rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .cart-item-price {
      font-size: 0.88rem;
      color: var(--gray-600);
    }

    .cart-item-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 0.75rem;
    }

    .cart-item-total {
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .qty-control {
      display: flex;
      align-items: center;
      gap: 0;
      border: 1.5px solid var(--border);
      border-radius: 3px;
      overflow: hidden;
    }

    .qty-btn {
      background: none;
      border: none;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1rem;
      color: var(--black);
      transition: background 0.15s;
    }

    .qty-btn:hover { background: var(--gray-100); }

    .qty-val {
      min-width: 32px;
      text-align: center;
      font-size: 0.88rem;
      font-weight: 600;
      padding: 0 4px;
      border-left: 1.5px solid var(--border);
      border-right: 1.5px solid var(--border);
      line-height: 32px;
    }

    .remove-btn {
      background: none;
      border: none;
      font-size: 0.72rem;
      color: var(--gray-400);
      cursor: pointer;
      text-decoration: underline;
      font-family: 'Inter', sans-serif;
      transition: color 0.18s;
      padding: 0;
    }

    .remove-btn:hover { color: #CC0000; }

    /* Summary */
    .order-summary {
      background: var(--gray-50);
      border: 1.5px solid var(--border);
      border-radius: 4px;
      padding: 1.75rem;
      position: sticky;
      top: 80px;
    }

    .summary-title {
      font-weight: 700;
      font-size: 1rem;
      letter-spacing: -0.02em;
      margin-bottom: 1.5rem;
    }

    .summary-line {
      display: flex;
      justify-content: space-between;
      font-size: 0.88rem;
      color: var(--gray-600);
      margin-bottom: 0.75rem;
    }

    .summary-line.total {
      font-size: 1.05rem;
      font-weight: 700;
      color: var(--black);
      padding-top: 1rem;
      border-top: 1.5px solid var(--border);
      margin-top: 0.5rem;
    }

    .summary-note {
      font-size: 0.75rem;
      color: var(--gray-400);
      margin-top: 1rem;
      line-height: 1.6;
    }

    @media (max-width: 900px) {
      .cart-page { grid-template-columns: 1fr; }
      .order-summary { position: static; }
    }

    @media (max-width: 768px) {
      .cart-page { padding: 2rem 1.25rem 4rem; gap: 2rem; }
      .cart-item { grid-template-columns: 72px 1fr auto; gap: 1rem; }
      .cart-item-img { width: 72px; height: 72px; }
    }

    @media (max-width: 400px) {
      .cart-item { grid-template-columns: 64px 1fr; }
      .cart-item-right { flex-direction: row; align-items: center; justify-content: space-between; grid-column: 1 / -1; }
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html" class="nav-logo">Store<span>.</span></a>
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="reviews.html">Reviews</a></li>
    </ul>
    <div class="nav-right">
      <a href="cart.html" class="cart-link" aria-label="Cart">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
        <span class="cart-badge" id="cartBadge"></span>
      </a>
      <button class="nav-hamburger" id="hamburger" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <div class="nav-mobile" id="navMobile">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="reviews.html">Reviews</a></li>
      <li><a href="cart.html">Cart</a></li>
    </ul>
  </div>

  <header class="page-header">
    <h1>Your Cart</h1>
    <p id="cartHeaderCount">Loading&hellip;</p>
  </header>

  <div id="cartEmpty" style="display:none">
    <div class="empty-state">
      <div class="empty-icon">&#128722;</div>
      <h3>Your cart is empty</h3>
      <p>Add some products to get started.</p>
      <a href="products.html" class="btn btn-primary">Browse Products</a>
    </div>
  </div>

  <div class="cart-page" id="cartPage">
    <div class="cart-items" id="cartItems"></div>
    <div class="order-summary">
      <div class="summary-title">Order Summary</div>
      <div class="summary-line"><span>Subtotal</span><span id="summarySubtotal">&pound;0.00</span></div>
      <div class="summary-line"><span>Delivery</span><span id="summaryDelivery">Calculated at checkout</span></div>
      <div class="summary-line total"><span>Total</span><span id="summaryTotal">&pound;0.00</span></div>
      <div class="summary-note">Free delivery on orders over &pound;50. Taxes included.</div>
      <a href="checkout.html" class="btn btn-primary" style="width:100%;margin-top:1.5rem;display:block;text-align:center;">Proceed to Checkout</a>
      <a href="products.html" class="btn btn-ghost" style="width:100%;margin-top:0.75rem;display:block;text-align:center;">Continue Shopping</a>
    </div>
  </div>

  <footer>
    <div class="footer-logo">Store<span>.</span></div>
    <div class="footer-copy">&copy; 2026 Store. All rights reserved.</div>
  </footer>

  <script>
    var SEED_PRODUCTS = [
      { id: 'p1', name: 'Classic White Tee', price: 29.99, description: '', image: 'https://picsum.photos/seed/whitete/600/600', category: 'Clothing', featured: true },
      { id: 'p2', name: 'Black Hoodie', price: 54.99, description: '', image: 'https://picsum.photos/seed/hoodie1/600/600', category: 'Clothing', featured: true },
      { id: 'p3', name: 'Canvas Tote Bag', price: 19.99, description: '', image: 'https://picsum.photos/seed/totebag/600/600', category: 'Accessories', featured: true },
      { id: 'p4', name: 'Slim Leather Wallet', price: 39.99, description: '', image: 'https://picsum.photos/seed/wallet1/600/600', category: 'Accessories', featured: true },
      { id: 'p5', name: 'Minimal Watch', price: 89.99, description: '', image: 'https://picsum.photos/seed/watch1/600/600', category: 'Accessories', featured: false },
      { id: 'p6', name: 'Ceramic Mug', price: 14.99, description: '', image: 'https://picsum.photos/seed/mug1/600/600', category: 'Home', featured: false },
      { id: 'p7', name: 'Hardback Notebook', price: 16.99, description: '', image: 'https://picsum.photos/seed/notebook1/600/600', category: 'Stationery', featured: false },
      { id: 'p8', name: 'Slim Chinos', price: 44.99, description: '', image: 'https://picsum.photos/seed/chinos1/600/600', category: 'Clothing', featured: false }
    ];

    function loadProducts() {
      try { var s = localStorage.getItem('ec_products'); if (s) return JSON.parse(s); } catch(e) {}
      localStorage.setItem('ec_products', JSON.stringify(SEED_PRODUCTS));
      return SEED_PRODUCTS;
    }

    function loadCart() {
      try { return JSON.parse(localStorage.getItem('ec_cart') || '[]'); } catch(e) { return []; }
    }

    function saveCart(c) { localStorage.setItem('ec_cart', JSON.stringify(c)); }

    function updateBadge() {
      var count = loadCart().reduce(function(s,i) { return s + i.quantity; }, 0);
      var b = document.getElementById('cartBadge');
      if (b) { b.textContent = count; b.style.display = count > 0 ? 'flex' : 'none'; }
    }

    function getProductById(id) {
      var products = loadProducts();
      for (var i = 0; i < products.length; i++) { if (products[i].id === id) return products[i]; }
      return null;
    }

    function changeQty(id, delta) {
      var cart = loadCart();
      for (var i = 0; i < cart.length; i++) {
        if (cart[i].productId === id) {
          cart[i].quantity += delta;
          if (cart[i].quantity < 1) cart.splice(i, 1);
          break;
        }
      }
      saveCart(cart);
      renderCart();
      updateBadge();
    }

    function removeItem(id) {
      var cart = loadCart().filter(function(i) { return i.productId !== id; });
      saveCart(cart);
      renderCart();
      updateBadge();
    }

    function renderCart() {
      var cart = loadCart();
      var products = loadProducts();
      var DELIVERY_THRESHOLD = 50;

      if (cart.length === 0) {
        document.getElementById('cartPage').style.display = 'none';
        document.getElementById('cartEmpty').style.display = 'block';
        document.getElementById('cartHeaderCount').textContent = '0 items';
        return;
      }

      document.getElementById('cartPage').style.display = 'grid';
      document.getElementById('cartEmpty').style.display = 'none';

      var subtotal = 0;
      var itemsHTML = '';

      cart.forEach(function(item) {
        var p = getProductById(item.productId);
        if (!p) return;
        var lineTotal = p.price * item.quantity;
        subtotal += lineTotal;
        itemsHTML +=
          '<div class="cart-item">' +
            '<div class="cart-item-img"><img src="' + p.image + '" alt="' + p.name + '" /></div>' +
            '<div class="cart-item-info">' +
              '<div class="cart-item-cat">' + p.category + '</div>' +
              '<div class="cart-item-name">' + p.name + '</div>' +
              '<div class="cart-item-price">&pound;' + p.price.toFixed(2) + ' each</div>' +
            '</div>' +
            '<div class="cart-item-right">' +
              '<div class="cart-item-total">&pound;' + lineTotal.toFixed(2) + '</div>' +
              '<div class="qty-control">' +
                '<button class="qty-btn" onclick="changeQty(\'' + p.id + '\',-1)">&#8722;</button>' +
                '<span class="qty-val">' + item.quantity + '</span>' +
                '<button class="qty-btn" onclick="changeQty(\'' + p.id + '\',1)">&#43;</button>' +
              '</div>' +
              '<button class="remove-btn" onclick="removeItem(\'' + p.id + '\')">Remove</button>' +
            '</div>' +
          '</div>';
      });

      var totalCount = cart.reduce(function(s,i) { return s + i.quantity; }, 0);
      document.getElementById('cartHeaderCount').textContent = totalCount + ' item' + (totalCount !== 1 ? 's' : '');
      document.getElementById('cartItems').innerHTML = itemsHTML;
      document.getElementById('summarySubtotal').textContent = '\u00a3' + subtotal.toFixed(2);

      var delivery = subtotal >= DELIVERY_THRESHOLD ? 'Free' : '\u00a34.99';
      document.getElementById('summaryDelivery').textContent = delivery;

      var total = subtotal + (subtotal >= DELIVERY_THRESHOLD ? 0 : 4.99);
      document.getElementById('summaryTotal').textContent = '\u00a3' + total.toFixed(2);
    }

    document.getElementById('hamburger').addEventListener('click', function() {
      document.getElementById('navMobile').classList.toggle('open');
    });

    updateBadge();
    renderCart();
  </script>
</body>
</html>
